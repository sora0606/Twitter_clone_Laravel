@extends('layouts.app')

@section('content')
@inject('Util', 'App\Library\Util')

    <div class="main-header">
        <h1>ホーム</h1>
    </div>

    <div class="tweet-area">

        <a class="myicon" href="">
            <img src="{{asset($Util->buildImagePath($user -> file_name, 'user'))}}" alt="icon">
            <span class="bg"></span>
        </a>

        <div class="input-area">

            <form action="{{url('/create/tweet')}}" method="POST" enctype="multipart/form-data">

            @csrf
            <div class="pictures-chack-area">
                <textarea id="body" name="body" placeholder="いまどうしてる？"></textarea>
            </div>
                <div class="button-area">
                    <div class="file-area">
                        <label for="file">
                            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 430.23 430.23" style="enable-background:new 0 0 430.23 430.23;" xml:space="preserve" fill='#1af'>
                                <g>
                                    <g>
                                        <g>
                                            <path d="M217.875,159.668c-24.237,0-43.886,19.648-43.886,43.886c0,24.237,19.648,43.886,43.886,43.886
                                                c24.237,0,43.886-19.648,43.886-43.886C261.761,179.316,242.113,159.668,217.875,159.668z M217.875,226.541
                                                c-12.696,0-22.988-10.292-22.988-22.988c0-12.696,10.292-22.988,22.988-22.988h0c12.696,0,22.988,10.292,22.988,22.988
                                                C240.863,216.249,230.571,226.541,217.875,226.541z"/>
                                            <path d="M392.896,59.357L107.639,26.966c-11.071-1.574-22.288,1.658-30.824,8.882c-8.535,6.618-14.006,16.428-15.151,27.167
                                                l-5.224,42.841H40.243c-22.988,0-40.229,20.375-40.229,43.363V362.9c-0.579,21.921,16.722,40.162,38.644,40.741
                                                c0.528,0.014,1.057,0.017,1.585,0.01h286.824c22.988,0,43.886-17.763,43.886-40.751v-8.359
                                                c7.127-1.377,13.888-4.224,19.853-8.359c8.465-7.127,13.885-17.22,15.151-28.212l24.033-212.114
                                                C432.44,82.815,415.905,62.088,392.896,59.357z M350.055,362.9c0,11.494-11.494,19.853-22.988,19.853H40.243
                                                c-10.383,0.305-19.047-7.865-19.352-18.248c-0.016-0.535-0.009-1.07,0.021-1.605v-38.661l80.98-59.559
                                                c9.728-7.469,23.43-6.805,32.392,1.567l56.947,50.155c8.648,7.261,19.534,11.32,30.825,11.494
                                                c8.828,0.108,17.511-2.243,25.078-6.792l102.922-59.559V362.9z M350.055,236.99l-113.894,66.351
                                                c-9.78,5.794-22.159,4.745-30.825-2.612l-57.469-50.678c-16.471-14.153-40.545-15.021-57.992-2.09l-68.963,50.155V149.219
                                                c0-11.494,7.837-22.465,19.331-22.465h286.824c12.28,0.509,22.197,10.201,22.988,22.465V236.99z M409.112,103.035
                                                c-0.007,0.069-0.013,0.139-0.021,0.208l-24.555,212.114c0.042,5.5-2.466,10.709-6.792,14.106c-2.09,2.09-6.792,3.135-6.792,4.18
                                                V149.219c-0.825-23.801-20.077-42.824-43.886-43.363H77.337l4.702-40.751c1.02-5.277,3.779-10.059,7.837-13.584
                                                c4.582-3.168,10.122-4.645,15.674-4.18l284.735,32.914C401.773,81.346,410.203,91.545,409.112,103.035z"/>
                                        </g>
                                    </g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                                <g>
                                </g>
                            </svg>
                        </label>
                        <input type="file" name="pictures" class="file" id="file" accept="video/*,image/*" multired>
                    </div>
                    <button class="btn-tweet" type="submit">ツイートする</button>
                </div>
            </form>

        </div>

    </div>

    <div class="ditch"></div>

    @if(count($users_tweets) > 0)
    @foreach($users_tweets as $user_tweet)
    <div class="tweet">
        <div class="tweet-content">
            <div class="user-icon">
                <a href="" class="myicon">
                    <img src="{{asset($Util->buildImagePath($user_tweet -> user_icon, 'user'))}}" alt="">
                    <span class="bg"></span>
                </a>
            </div>
            <div class="tweet-main">
                <div class="user">
                    <a href="">
                        <h1 class="user-name">{{$user_tweet -> user_nickname}}
                            <span class='line'></span>
                        </h1>
                        <p class="user-id">@ {{$user_tweet -> user_name}}</p>
                    </a>
                    <p class="dot">・</p>
                    <p class="tweet-time">{{$Util->convertToDayTimeAgo($user_tweet -> tweet_created_at)}}</p>
                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                    viewBox="0 0 426.667 426.667" style="enable-background:new 0 0 426.667 426.667;" xml:space="preserve" fill='rgb(126, 126, 126)'>
                        <g>
                            <g>
                                <circle cx="42.667" cy="213.333" r="42.667"/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <circle cx="213.333" cy="213.333" r="42.667"/>
                            </g>
                        </g>
                        <g>
                            <g>
                                <circle cx="384" cy="213.333" r="42.667"/>
                            </g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                        <g>
                        </g>
                </svg>

                </div>
                <div class="user-tweet">
                    <p class="tweet-body">{!! nl2br(e($user_tweet -> tweet_body)) !!}</p>


                        @if($user_tweet->tweet_img !== null)
                            <img src="{{asset('storage/img_upload/tweet/'.$user_tweet->tweet_img)}}" alt="" class="tweet-img">
                        @elseif($user_tweet->tweet_mov !== null)
                        <div class="mov">
                            <video loop autoplay controls muted playsinline preload="metadata" autoPictureInPicture>
                                <source  src="{{asset('storage/img_upload/tweet/'.$user_tweet->tweet_mov)}}" type='video/mp4'>
                            </video>
                        </div>
                        @endif
                    </div>
                <div class="btn-list">
                    <button class='btn-message'>
                        <div class="message">
                            <svg height="480pt" viewBox="0 -24 480 480" width="480pt" xmlns="http://www.w3.org/2000/svg" fill= 'rgb(126, 126, 126)'>
                                <path d="m408 0h-336c-39.746094.0429688-71.9570312 32.253906-72 72v208c.0429688 39.746094 32.253906 71.957031 72 72h22.238281l-14.078125 70.398438c-.605468 3.027343.585938 6.128906 3.054688 7.976562s5.78125 2.109375 8.511718.671875l150.25-79.046875h166.023438c39.746094-.042969 71.957031-32.253906 72-72v-208c-.042969-39.746094-32.253906-71.9570312-72-72zm56 280c-.035156 30.914062-25.085938 55.964844-56 56h-168c-1.300781 0-2.578125.316406-3.726562.921875l-137.128907 72.175781 12.695313-63.496094c.480468-2.355468-.121094-4.800781-1.640625-6.660156-1.519531-1.863281-3.796875-2.941406-6.199219-2.941406h-32c-30.914062-.035156-55.964844-25.085938-56-56v-208c.035156-30.914062 25.085938-55.964844 56-56h336c30.914062.035156 55.964844 25.085938 56 56zm0 0"/>
                            </svg>
                        </div>
                        <p class='message-count'></p>
                    </button>

                    <button class='btn-retweet'>
                        <div class="retweet">
                            <svg height="512pt" viewBox="0 -80 512.0007 512" width="512pt" xmlns="http://www.w3.org/2000/svg" fill='rgb(126, 126, 126)'>
                                <path d="m178 20c0-11.046875 8.953125-20 20-20h168c44.113281 0 80 35.890625 80 80v163c0 11.046875-8.953125 20-20 20s-20-8.953125-20-20v-163c0-22.054688-17.945312-40-40-40h-168c-11.046875 0-20-8.953125-20-20zm328.046875 242.761719c-7.863281-7.753907-20.527344-7.667969-28.285156.195312l-44.496094 45.109375c-1.882813 1.890625-4.371094 2.933594-7.011719 2.933594-.003906 0-.003906 0-.007812 0-2.636719 0-5.125-1.039062-7.007813-2.925781l-45.078125-45.195313c-7.800781-7.824218-20.464844-7.839844-28.285156-.039062-7.820312 7.800781-7.835938 20.464844-.035156 28.285156l45.078125 45.199219c9.441406 9.464843 21.988281 14.675781 35.328125 14.675781h.035156c13.351562-.007812 25.90625-5.238281 35.402344-14.785156l44.554687-45.167969c7.757813-7.863281 7.671875-20.527344-.191406-28.285156zm-194.046875 49.238281h-166c-22.054688 0-40-17.941406-40-40v-168c0-11.046875-8.953125-20-20-20s-20 8.953125-20 20v168c0 44.113281 35.886719 80 80 80h166c11.046875 0 20-8.953125 20-20s-8.953125-20-20-20zm-226.253906-272h.007812c2.636719 0 5.125 1.039062 7.007813 2.925781l45.078125 45.199219c3.90625 3.917969 9.035156 5.875 14.160156 5.875 5.109375 0 10.21875-1.945312 14.125-5.839844 7.820312-7.796875 7.835938-20.460937.035156-28.28125l-45.078125-45.199218c-9.449219-9.472657-21.996093-14.7343755-35.363281-14.679688-13.351562.0117188-25.90625 5.238281-35.402344 14.785156l-44.554687 45.171875c-7.757813 7.863281-7.671875 20.523438.195312 28.28125 7.859375 7.757813 20.523438 7.671875 28.28125-.191406l44.5-45.109375c1.878907-1.890625 4.367188-2.933594 7.007813-2.9375zm0 0"/>
                            </svg>
                        </div>
                        <p class='retweet-count'></p>
                    </button>

                    <button class='btn-like'>
                        <div class="like">
                            <svg width="150px" height="150px" viewBox="0 0 150 150" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="rgb(126, 126, 126)">
                                <g id="icon-comment" stroke="none" stroke-width="2">
                                    <g id="icon-heart" transform="translate(12.000000, 19.000000)">
                                        <path d="M63.5,113 C61.6919709,113 59.9488602,112.344939 58.5904159,111.154975 C53.4599153,106.668388 48.5135116,102.452158 44.1494369,98.7330377 L44.1271516,98.7136572 C31.3323898,87.8092135 20.2836458,78.3922237 12.5961304,69.1157427 C4.00266272,58.7452321 0,48.9125304 0,38.170883 C0,27.7344784 3.5782699,18.1062411 10.0749666,11.0585188 C16.6491776,3.92746023 25.6699447,0 35.4784546,0 C42.8094026,0 49.52314,2.31790896 55.4326628,6.88880212 C58.4150391,9.19605174 61.1183626,12.0197921 63.5,15.3135098 C65.8826066,12.0197921 68.5849609,9.19605174 71.568306,6.88880212 C77.4778289,2.31790896 84.1915665,0 91.5225143,0 C101.330055,0 110.351791,3.92746023 116.926003,11.0585188 C123.422699,18.1062411 127,27.7344784 127,38.170883 C127,48.9125304 122.998306,58.7452321 114.404839,69.1147738 C106.717323,78.3922237 95.669548,87.8082445 82.8767244,98.7117193 C78.5048982,102.436653 73.550743,106.659666 68.408615,111.156914 C67.0511398,112.344939 65.3070602,113 63.5,113 L63.5,113 Z M35.4784546,7.44017781 C27.7725297,7.44017781 20.6935043,10.5158646 15.5436248,16.1013275 C10.3171997,21.7710957 7.43849939,29.6085738 7.43849939,38.170883 C7.43849939,47.2051074 10.7958528,55.284842 18.323494,64.3684868 C25.5992126,73.1488269 36.4212264,82.3720114 48.9514694,93.0516412 L48.9747238,93.071022 C53.3552703,96.8046771 58.3210526,101.03738 63.4893417,105.556915 C68.6886368,101.028659 73.6621704,96.7891727 78.0514373,93.0497033 C90.5807113,82.3700735 101.401756,73.1488269 108.677475,64.3684868 C116.204147,55.284842 119.561501,47.2051074 119.561501,38.170883 C119.561501,29.6085738 116.6828,21.7710957 111.456375,16.1013275 C106.307465,10.5158646 99.2274703,7.44017781 91.5225143,7.44017781 C85.8775101,7.44017781 80.6946868,9.23481276 76.1184159,12.7736941 C72.0401765,15.9288411 69.1992644,19.9173497 67.5336686,22.7081431 C66.6771317,24.1432701 65.1694718,24.9998886 63.5,24.9998886 C61.8305282,24.9998886 60.3228683,24.1432701 59.4663314,22.7081431 C57.8017045,19.9173497 54.9607926,15.9288411 50.8815841,12.7736941 C46.3053132,9.23481276 41.1224899,7.44017781 35.4784546,7.44017781 Z" id="Shape"></path>
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <p class='like-count'></p>
                    </button>

                    <button class='btn-upload'>
                        <div class="upload">
                            <svg height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg" fill='rgb(126, 126, 126)'>
                                <g id="Solid">
                                    <path d="m182.461 155.48 49.539-49.539v262.059a24 24 0 0 0 48 0v-262.059l49.539 49.539a24 24 0 1 0 33.941-33.941l-90.509-90.51a24 24 0 0 0 -33.942 0l-90.509 90.51a24 24 0 1 0 33.941 33.941z"/>
                                    <path d="m464 232a24 24 0 0 0 -24 24v184h-368v-184a24 24 0 0 0 -48 0v192a40 40 0 0 0 40 40h384a40 40 0 0 0 40-40v-192a24 24 0 0 0 -24-24z"/>
                                </g>
                            </svg>
                        </div>
                    </button>

                </div>
            </div>
        </div>
    </div>
    @endforeach
    @endif

@endsection